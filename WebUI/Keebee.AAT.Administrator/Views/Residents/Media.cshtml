@model Keebee.AAT.Administrator.ViewModels.ResidentMediaViewModel

@{
    ViewBag.Title = "Resident Media";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h3>Manage media for <i><b>@Model.FullName</b></i></h3>

<script type="text/javascript">
    $(document)
        .ready(function() {
            residents.media.init({ residentid: '@Model.ResidentId' });
        });
</script>

@{Html.BeginForm();}
    <div class="media-manager-button-container">
        <button id="uploadbutton" type="button" class="btn btn-md btn-success" onclick="return" false;">@Model.UploadButtonText</button>
        @Html.Raw(@Model.UploaderHtml)
        <input id="mediaType" name="mediaType" type="hidden" value="@Model.SelectedMediaType"/>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="row">
                <div class="pull-right record-total">
                    <label>Total:</label> <span data-bind="text: totalFiles()"></span>
                </div>
            </div>
            <ul class="nav nav-pills">
                <li>
                    <input id="txtSearchFilename" type="text" class="form-control" placeholder="Name" data-bind="value: filenameSearch, valueUpdate: 'keyup'"/>
                </li>
                <li>
                    <select id="ddiMediaTypes" class="form-control" data-bind="options: mediaTypes, value: selectedMediaType, event: { change: doPostBack }"></select>
                </li>
            </ul>
            <label id="lblGoBackDisabled" class="pull-right link-back-to-residents-disabled" hidden >Back To Residents</label>
            <a id="lnkGoBack" class="pull-right link-back-to-residents" href="#" onclick="location.href =
                                  '@Url.Action("Index", "Residents",
                                       new
                                       {
                                           @id = @Model.ResidentId,
                                           @rfid = @Model.RfidSearch,
                                           @firstname = @Model.FirstNameSearch,
                                           @lastname = @Model.LastNameSearch,
                                           @sortcolumn = @Model.SortColumn,
                                           @sortdescending = @Model.SortDescending
                                       })'">Back To Residents</a>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover" id="tblFile">
                <thead>
                <tr>
                    <th class="col-glyphicon"></th>
                    <!-- ko foreach: columns -->
                    <!-- ko if: !sortable -->
                    <th class="col-file" data-bind="text: title"></th>
                    <!-- /ko -->
                    <!-- ko if: sortable -->
                    <th data-bind="click: $parent.sort, attr: { id: 'file-col-' + sortKey } "><a href="#" data-bind="text: title"></a></th>
                    <!-- /ko -->
                    <!-- /ko -->
                </tr>
                </thead>

                <tbody data-bind="foreach: filesTable">
                <tr data-bind="click: $parent.highlightRow, attr: {id: 'row_' +  streamid}">
                    <td><a href="#" data-bind="click: $parent.showDeleteDialog, css: 'glyphicon glyphicon-remove'"></a></td>
                    <td data-bind="text: filename"></td>
                    <td data-bind="text: filetype"></td>
                    <td data-bind="text: filesize"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
@{Html.EndForm();}