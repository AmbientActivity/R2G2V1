<!DOCTYPE html>
<html>
<head>
    <link rel="apple-touch-icon" sizes="57x57" href="~/Content/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="~/Content/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="~/Content/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="~/Content/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="~/Content/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="~/Content/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="~/Content/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="~/Content/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="~/Content/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="~/Content/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/Content/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="~/Content/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/Content/favicons/favicon-16x16.png">
    <link rel="manifest" href="~/Content/favicons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="~/Content/favicons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    @Styles.Render("~/bundles/CommonStyles")
    @Scripts.Render("~/bundles/Jquery")
    @Scripts.Render("~/bundles/JqueryVal")
    @Scripts.Render("~/bundles/Modernizr")
    @Scripts.Render("~/bundles/Bootstrap")
    @Scripts.Render("~/bundles/ThirdPartyScripts")
    @Scripts.Render("~/bundles/CustomScripts")

    <meta name="description" content="R2G2 Administrator"/>
</head>
<body>

 <!-- this script is needed for multiple level dropodowns which bootstrap does not support -->
<script>
    $(document)
        .ready(function() {
            function collapseSubmenus() {
                var submenus = $('.dropdown-submenu a.multiple-dropdown');

                $(submenus)
                    .each(function(index, menu) {
                        if ($(menu).next('ul').is(':visible')) {
                            $(menu).next('ul').toggle();
                        }
                    });
            }

            $('.navbar-collapse')
                .on("click",
                    function() {
                        collapseSubmenus();
                    });

            $('.dropdown-submenu a.multiple-dropdown')
                .on("click",
                    function(e) {
                        collapseSubmenus();
                        $(this).next('ul').toggle();
                        e.stopPropagation();
                        e.preventDefault();
                    });

            $('body')
                .on("click",
                    function() {
                        collapseSubmenus();
                    });
        });
</script>

<div class="navbar navbar-fixed-top">
    <div class="container">
        @*<div class="navbar-brand">
                <a href="~/Home"><img src="~/Content/Images/logo_small.png" alt="" /></a>
        </div>*@
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse">
            <ul id="main-menu" class="nav navbar-nav">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                @if (Request.IsAuthenticated)
                {
                    if (User.IsInRole("Caregiver"))
                    {
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Manage <i class="fa fa-caret-down"></i></a>
                            <ul class="dropdown-menu">
                                <li>@Html.ActionLink("Public Profile", "Index", "PublicProfile")</li>
                                @if (Session["IsBeaconWatcherServiceInstalled"].ToString() == "true")
                                {
                                    <li>@Html.ActionLink("Residents", "Index", "Residents")</li>
                                }
                            </ul>
                        </li>
                    }
                    if (User.IsInRole("Administrator"))
                    {
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Data Capture <i class="fa fa-caret-down"></i></a>
                            <ul class="dropdown-menu">
                                <li>@Html.ActionLink("Event Logs", "Index", "EventLogs")</li>
                                <li>@Html.ActionLink("Export Event Log", "Export", "EventLogs")</li>
                                <li><hr></li>
                                <li>@Html.ActionLink("Video Captures", "Index", "VideoCaptures")</li>
                                <li>@Html.ActionLink("Export Video Captures", "Export", "VideoCaptures")</li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">System <i class="fa fa-caret-down"></i></a>
                            <ul class="dropdown-menu">
                                <li>@Html.ActionLink("Shared Library", "Index", "SharedLibrary")</li>
                                <li class="dropdown-submenu">
                                    <a href="" class="multiple-dropdown">Configuration <i class="fa fa-caret-right"></i></a>
                                    <ul class="dropdown-menu">
                                        <li>@Html.ActionLink("System Profile", "Index", "SystemProfile")</li>
                                        <li>@Html.ActionLink("Phidgets", "Index", "PhidgetConfig")</li>
                                        <li>@Html.ActionLink("Services", "Index", "Services")</li>
                                        <li>@Html.ActionLink("Maintenance", "Index", "Maintenance")</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    }
                }
            </ul>
            <div class="greeting" id="greeting">@Html.Partial("_LogOnPartial")</div>
        </div>
    </div>
</div>
<div class="container body-content">
    @RenderBody()
    <hr/>
    <footer>
        <p>&copy; @DateTime.Now.Year - Ambient Activity Technologies (AAT)</p>
    </footer>
</div>
@RenderSection("scripts", required: false)
</body>
</html>